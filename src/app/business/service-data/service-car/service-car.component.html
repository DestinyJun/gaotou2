<div class="service-vehicle">
  <!--日车流量实时统计-->
  <div class="service-vehicle-amount">
    <app-title-one [height]="'3vh'" [option]="{title: serviceName + '今日车流量'}"></app-title-one>
    <h2 [countUp]="carNumber" [options]="carNumberOption" style="text-align: center;
    letter-spacing: 5px;
    font-size: 2rem;
    color: #05eff1;
    font-weight: 900;">0</h2>
  </div>
  <!--车型日分布占比-->
  <div class="service-vehicle-pie">
    <div class="service-vehicle-pie-title text-center">
      <p>{{serviceName}}当日车型日分布类型占比分析</p>
    </div>
    <app-echarts-rose-figure
      [height]="'20vh'"
      [option]="optionsCarModel"
      (pieClick)="parkClick($event)">
    </app-echarts-rose-figure>
  </div>
  <!--车辆类型弹窗-->
  <div class="bg-box" *ngIf="alertCarShow">
    <div class="alert-window">
      <div class="alert-window-header">
        <div class="row">
          <div class="col-ld-12 col-md-12">
            <span>{{serviceName}}历史{{alertCarTitle}}车辆分布统计</span>
            <div class="pull-right" (click)="closeCarShow()">
              <i class="fa fa-window-close " aria-hidden="true"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="alert-window-content">
        <div class="row">
          <div class="col-ld-12 col-md-12">
            <div class="alert-window-content-table" style="padding: 0 20px">
              <div class="toggle-btn">
                <button
                  *ngFor="let item of carBtnList;let i = index"
                  class="btn"
                  [ngClass]="item.bgc"
                  [ngStyle]="{'background':item.isHeight?'black': ''}"
                  (click)="carBtnClick(carBtnList, i)"
                >
                  {{item.vehicleTypeName}}
                </button>
                <div class="toggle-btn-area pull-right" style="">
                  <span (click)="carExcelShow = true">表格导出</span>
                </div>
              </div>
              <div class="content-table">
                <p-scrollPanel [style]="{width: '100%', height: '40vh'}">
                  <table class="table table-bordered">
                    <thead>
                    <tr>
                      <th>{{alertCarTitle}}排名</th>
                      <th [ngStyle]="{'background':alertCarTitle === '总数'?'black': ''}">车辆总数</th>
                      <th [ngStyle]="{'background':alertCarTitle === '小车'?'black': ''}">小车总数</th>
                      <th [ngStyle]="{'background':alertCarTitle === '客车'?'black': ''}">客车总数</th>
                      <th [ngStyle]="{'background':alertCarTitle === '货车'?'black': ''}">货车总数</th>
                      <th>时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let item of carTableData?.datas;let i=index">
                      <td >{{item?.rank}}</td>
                      <td [ngStyle]="{'background':alertCarTitle === '总数'?'black': ''}">{{item?.total}}</td>
                      <td [ngStyle]="{'background':alertCarTitle === '小车'?'black': ''}">{{item?.car}}</td>
                      <td [ngStyle]="{'background':alertCarTitle === '客车'?'black': ''}">{{item?.passengerCar}}</td>
                      <td [ngStyle]="{'background':alertCarTitle === '货车'?'black': ''}">{{item?.truck}}</td>
                      <td class="content-table-car" (click)="carTableClick(item)">
                        {{item?.time.split('').slice(0,4).join('')}}-
                        {{item?.time.split('').slice(4,6).join('')}}-
                        {{item?.time.split('').slice(6,8).join('')}}
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </p-scrollPanel>
              </div>
              <app-paging [option]="{total: carTableData?.totalRecord,row: 8}" (pageClick)="carDistributionPaging($event)"></app-paging>
            </div>
          </div>
        </div>
      </div>
      <div class="bg-excel" *ngIf="carExcelShow">
        <div class="alert-window-excel">
          <div class="alert-window-excel-header">
            <span>车辆数据表格导出</span>
            <div class="pull-right" (click)="carExcelShow = false">
              <i class="fa fa-window-close " aria-hidden="true"></i>
            </div>
          </div>
          <div class="alert-window-excel-content">
            <div class="alert-window-excel-content-list">
              <label>请选择开始时间：</label>
              <!--              <p-calendar placeholder="请点击选择时间......" [locale]="esDate" [(ngModel)]="carStartTime" [monthNavigator]="true" [yearNavigator]="true" dateFormat="yymmdd"  yearRange="2017:2030"></p-calendar>-->
            </div>
            <div class="alert-window-excel-content-list">
              <label>请选择结束时间：</label>
              <!--              <p-calendar placeholder="请点击选择时间......" [locale]="esDate" [(ngModel)]="carEndTime" [monthNavigator]="true" [yearNavigator]="true" dateFormat="yymmdd"  yearRange="2017:2030"></p-calendar>-->
            </div>
          </div>
          <div class="alert-window-excel-footer text-center">
            <span (click)="carExportClick();carExcelShow = false">确认导出</span>
            <span (click)="carExcelShow = false">取消导出</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
