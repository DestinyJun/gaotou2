<div class="main">
  <!--*****************大数据可视化***********************-->
  <div class="row">
    <!--左边-->
    <div class="left col-lg-3 col-md-3">
      <!--3d柱状图-->
     <app-province-3d [esDate]="esDate" [provinceId]="provinceId" [provinceName]="dataToggle"></app-province-3d>
      <!--车辆统计-->
      <app-province-car [esDate]="esDate" [provinceId]="provinceId" [provinceName]="dataToggle"></app-province-car>
    </div>
    <!--中间-->
    <div class="center col-lg-6 col-md-6">
      <!--百度地图-->
      <div class="map">
        <app-echart-bmap
          [height]="'50vh'"
          [option]="{minZoom:7,maxZoom:9,center:[106.645779,26.654099],zoom: 8, area:dataToggle.substring(0, dataToggle.length - 1)}"
          [points]="mapPoints"
          (cityClick)="mapCityClick($event)"
        ></app-echart-bmap>
      </div>
      <!--事件监控-->
      <div class="event-table">
        <div class="col-lg-2 col-md-2 event-table-service">
          <div class="event-table-service-title title text-center">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <p>事件监控</p>
          </div>
          <app-event-statistic [option]="eventTypes" [width]="'100%'" [height]="'30vh'" (eventStatisticClick)="tableEventClick($event)"></app-event-statistic>
          <!--事件监控弹窗-->
          <app-wenjun-alert [config]="eventConfig">
            <div class="row">
              <div class="col-lg-12 col-md-12">
                <div>
                  <button class="btn" [ngStyle]="{'color':!eventAlertListShow?'black': 'white'}" [ngClass]="{'btn-primary': eventAlertListShow}" (click)="eventAlertListCtrlw()">未处理事件</button>
                  <button class="btn" [ngStyle]="{'color':eventAlertListShow?'black': 'white'}" [ngClass]="{'btn-primary': !eventAlertListShow}" (click)="eventAlertListCtrly()">已处理事件</button>
                </div>
              </div>
              <div class="col-lg-8 col-md-8" *ngIf="eventAlertListShow">
                <app-event-list [option]="eventListNoProcess" [width]="'100%'" [height]="'45vh'" (eventListClick)="eventListInfoClick($event)"></app-event-list>
              </div>
              <div class="col-lg-8 col-md-8" *ngIf="!eventAlertListShow">
                <app-event-list [option]="eventListProcess" [width]="'100%'" [height]="'45vh'" (eventListClick)="eventListInfoClick($event)"></app-event-list>
              </div>
              <div class="col-lg-4 col-md-4">
                <app-event-list-info [option]="eventListInfo" [width]="'100%'" [height]="'45vh'"></app-event-list-info>
              </div>
            </div>
          </app-wenjun-alert>
        </div>
        <div class="col-lg-7 col-md-7 event-table-office">
          <div class="event-table-office-title title text-center">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <p>服务区办公信息</p>
          </div>
          <app-event-office [option]="officeTypes" [width]="'100%'" [height]="'30vh'" (eventOfficeClick)="tableOfficeClick($event)"></app-event-office>
          <!--办公信息处理-->
          <div class="bg-box" *ngIf="alertOfficeShow">
            <div class="alert-window">
              <div class="alert-window-header">
                <div class="row">
                  <div class="col-lg-12 col-md-12">
                    <span>{{this.dataToggle}}服务区办公信息</span>
                    <div class="pull-right" (click)="closeOfficeShow()">
                      <i class="fa fa-window-close " aria-hidden="true"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="alert-window-content">
                <div class="row">
                  <div class="col-ld-12 col-md-12">
                    <h1 class="text-center">待开发中......</h1>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 event-table-person">
          <div class="event-table-person-title title text-center">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <p>个人信息处理</p>
          </div>
          <app-event-person [option]="personOfficeTypes" [width]="'100%'" [height]="'30vh'" (eventPersonClick)="tablePersonClick($event)"></app-event-person>
          <!--个人信息办公处处理-->
          <div class="bg-box" *ngIf="alertPersonShow">
            <div class="alert-window">
              <div class="alert-window-header">
                <div class="row">
                  <div class="col-lg-12 col-md-12">
                    <span>{{this.dataToggle}}服务区办公信息</span>
                    <div class="pull-right" (click)="closePersonShow()">
                      <i class="fa fa-window-close " aria-hidden="true"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="alert-window-content">
                <div class="row">
                  <div class="col-ld-12 col-md-12">
                    <h1 class="text-center">待开发中......</h1>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--右边-->
    <div class="right col-lg-3 col-md-3">
      <!--业态前十排名柱状图-->
      <div class="crosswise">
        <app-title-one [height]="'3vh'" [option]="{title: this.dataToggle + '业态数据前十排名'}"></app-title-one>
        <div class="crosswise-btn text-center" (click)="clickBtn($event)">
          <span [ngStyle]="{'background': barStatus1?'#1F0BC4': '#27375B'}">业态收入/万元</span>
          <span [ngStyle]="{'background': barStatus2?'#1F0BC4': '#3B78B1'}">车流量/辆</span>
          <span [ngStyle]="{'background': barStatus3?'#1F0BC4': '#04A6BB'}">客流量/人次</span>
        </div>
        <app-echart-crossbar [option]="crosswiseBar" [height]="'40vh'"></app-echart-crossbar>
      </div>
      <!--收入统计-->
      <div class="income">
        <!--实时收入-->
        <div class="income-amount">
          <app-title-one [height]="'3vh'" [option]="{title: this.dataToggle + '高速服务区实时收入'}"></app-title-one>
          <app-number-show [option]="incomeAmount"></app-number-show>
        </div>
        <!--收入占比-->
        <div class="income-pie">
          <div class="income-pie-title title text-center">
            <p>{{this.dataToggle}}高速服务区实时收入</p>
          </div>
          <app-echart-pie [option]="optionsIncomeModel" [height]="'20vh'" (pieClick)="incomeClick($event)"></app-echart-pie>
        </div>
      </div>
      <!--收入类型弹窗-->
      <div class="bg-box" *ngIf="alertIncomeShow">
        <div class="alert-window">
          <div class="alert-window-header">
            <div class="row">
              <div class="col-lg-12 col-md-12">
                <span>{{alertIncomeTitle}}收入分布统计</span>
                <div class="pull-right" (click)="closeIncomeShow()">
                  <i class="fa fa-window-close " aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="alert-window-content">
            <div class="row">
              <div class="col-ld-6 col-md-6 echart-btn">
                <app-echart-pie [option]="optionsIncomeTypes" [height]="'55vh'" (pieClick)="optionsIncomePieClick($event)"></app-echart-pie>
              </div>
              <div class="col-ld-6 col-md-6">
                <div class="alert-window-content-table">
                  <div class="toggle-btn" (click)="IncomeBtnClick($event)">
                    <button class="btn btn-info" [ngStyle]="{'background':alertIncomeTitle === '总收入'?'black': ''}">总收入</button>
                    <button class="btn btn-danger" [ngStyle]="{'background':alertIncomeTitle === '小吃'?'black': ''}">小吃</button>
                    <button class="btn btn-primary" [ngStyle]="{'background':alertIncomeTitle === '中式快餐'?'black': ''}">中式快餐</button>
                    <button class="btn btn-success" [ngStyle]="{'background':alertIncomeTitle === '西式快餐'?'black': ''}">西式快餐</button>
                    <button class="btn btn-info" [ngStyle]="{'background':alertIncomeTitle === '商超'?'black': ''}">商超</button>
                    <button class="btn btn-warning" [ngStyle]="{'background':alertIncomeTitle === '住宿'?'black': ''}">住宿</button>
                    <button class="btn btn-primary" [ngStyle]="{'background':alertIncomeTitle === '汽修'?'black': ''}">汽修</button>
                    <div class="toggle-btn-area pull-right" style="">
                      <span (click)="incomeExcelShow = true">表格导出</span>
                    </div>
                  </div>
                  <div class="content-table">
                    <p-scrollPanel [style]="{width: '100%', height: '40vh'}" styleClass="finance-statistics">
                      <table class="table table-bordered">
                        <thead>
                        <tr>
                          <th>排名</th>
                          <th [ngStyle]="{'background':alertIncomeTitle === '总收入'?'black': ''}">总收入</th>
                          <th *ngIf="!(alertIncomeTitle === '总收入')" [ngStyle]="{'background':!(alertIncomeTitle === '总收入')?'black': ''}">{{alertIncomeTitle}}收入(元）</th>
                          <th>服务区</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of IncomeTableData?.contents;let i=index">
                          <td>{{i+1}}</td>
                          <td [ngStyle]="{'background':alertIncomeTitle === '总收入'?'black': ''}">{{item?.totalRevenue}}</td>
                          <td *ngIf="!(alertIncomeTitle === '总收入')" [ngStyle]="{'background':!(alertIncomeTitle === '总收入')?'black': ''}">{{item?.revenue}}</td>
                          <td class="content-table-income" (click)="IncomeTableClick(item.zone)">{{item?.serviceArea.serviceName}}</td>
                        </tr>
                        </tbody>
                      </table>
                    </p-scrollPanel>
                  </div>
                  <app-paging [option]="{total: IncomeTableData?.totalRecord,row: 10}" (pageClick)="incomeDistributionPaging($event)"></app-paging>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-excel" *ngIf="incomeExcelShow">
            <div class="alert-window-excel">
              <div class="alert-window-excel-header">
                <span>收入数据表格导出</span>
                <div class="pull-right" (click)="incomeExcelShow = false;">
                  <i class="fa fa-window-close " aria-hidden="true"></i>
                </div>
              </div>
              <div class="alert-window-excel-content">
                <div class="alert-window-excel-content-list">
                  <label>请选择开始时间：</label>
                  <p-calendar placeholder="请点击选择时间......" [locale]="esDate" [(ngModel)]="incomeStartTime" [monthNavigator]="true" [yearNavigator]="true" dateFormat="yymmdd"  yearRange="2017:2030"></p-calendar>
                </div>
                <div class="alert-window-excel-content-list">
                  <label>请选择结束时间：</label>
                  <p-calendar placeholder="请点击选择时间......" [locale]="esDate" [(ngModel)]="incomeEndTime" [monthNavigator]="true" [yearNavigator]="true" dateFormat="yymmdd"  yearRange="2017:2030"></p-calendar>
                </div>
              </div>
              <div class="alert-window-excel-footer text-center">
                <span (click)="incomeExportClick();incomeExcelShow = false;">确认导出</span>
                <span (click)="incomeExcelShow = false;">取消导出</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

